{"version":3,"file":null,"sources":["../../src/view/states/index.js","../../src/model/states/input-query.js","../../src/model/states/list-query.js","../../src/model/states/setup.js","../../src/model/states/index.js","../../src/model/context-reducer.js","../../src/utils/guid.js","../../src/client/log.js","../../src/model/all-contexts-reducer.js","../../src/model/all-actions-reducer.js","../../src/model/all-classes-reducer.js","../../src/model/all-races-reducer.js","../../src/model/messages-reducer.js","../../src/model/index.js","../../src/client/client-io.js","../../src/view/AppContainer.js","../../src/client/index.js"],"sourcesContent":["//import introduction from './introduction'\r\n//import classSelection from './class-selection'\r\n//import townLobby from './town-lobby'\r\n//import rollDices from './roll-dices'\r\n//import assignDices from './assign-dices'\r\n//import battle from './battle'\r\n//import chat from './chat'\r\n\r\nexport {\r\n  //introduction, classSelection, townLobby, rollDices, assignDices, battle,\r\n//chat\r\n}","export const INPUT_QUERY = 'inputQuery'\r\n\r\nexport const QUERY_RESPONSE = 'INPUT_QUERY:QUERY_RESPONSE'\r\n\r\n/**\r\n * @typedef {{type: string, message: string}} ResponseAction\r\n */\r\n\r\n/**\r\n * @param {string} message\r\n * @returns ResponseAction\r\n */\r\nexport function queryResponseAction(message){\r\n  return {\r\n    type: QUERY_RESPONSE,\r\n    message\r\n  }\r\n}\r\n\r\n/**\r\n * @param {{id:string}} state\r\n * @returns string\r\n */\r\nexport function idSelector(state){\r\n  return state.id\r\n}\r\n\r\n/**\r\n * @param {{query:string}} state\r\n * @returns string\r\n */\r\nexport function querySelector(state){\r\n  return state.query\r\n}\r\n\r\n/**\r\n * @typedef {{name: string, id: string, query: string}} InputQuery\r\n */\r\n\r\n/**\r\n * @param {string} id\r\n * @param {string} query\r\n * @returns InputQuery\r\n */\r\nexport function createInputQuery({id = '', query = ''}) {\r\n  return {\r\n    name: INPUT_QUERY,\r\n    id,\r\n    query\r\n  }\r\n}\r\n\r\nconst initialState = createInputQuery({id:'', query:''})\r\n\r\n/**\r\n * @typedef {{name:string, id:string, query:string}} InputQueryState\r\n */\r\n\r\n/**\r\n * @param {InputQueryState} state\r\n * @param {*} action\r\n * @returns {* | InputQueryState}\r\n */\r\nexport default function introduction(state = initialState, action) {\r\n  switch (action.type) {\r\n    default :\r\n      return state\r\n  }\r\n}","export const LIST_QUERY = 'listQuery'\r\n\r\nexport const LIST_QUERY_RESPONSE = 'LIST_QUERY:LIST_QUERY_RESPONSE'\r\n\r\n/**\r\n * @param {number} option\r\n * @returns {{type: string, option: number}}\r\n */\r\nexport function listQueryResponseAction(option){\r\n  return {\r\n    type: LIST_QUERY_RESPONSE,\r\n    option\r\n  }\r\n}\r\n\r\n/**\r\n * @param {{id:string}} state\r\n * @returns string\r\n */\r\nexport function idSelector(state){\r\n  return state.id\r\n}\r\n\r\n/**\r\n * @param {{query:string}} state\r\n * @return string\r\n */\r\nexport function querySelector(state){\r\n  return state.query\r\n}\r\n\r\n/**\r\n * @param {{options:Array}} state\r\n * returns Array\r\n */\r\nexport function optionsSelector(state){\r\n  return state.options\r\n}\r\n\r\n/**\r\n * @typedef {{name: string, id: string, query: string, options: Array}} ListQuery\r\n */\r\n\r\n/**\r\n * @param {string} id\r\n * @param {string} query\r\n * @param {Array} options\r\n * @returns ListQuery\r\n */\r\nexport function createListQuery({id = 'none', query = 'none', options = []}) {\r\n  return {\r\n    name: LIST_QUERY,\r\n    id,\r\n    query,\r\n    options\r\n  }\r\n}\r\n\r\nconst initialState = createListQuery({id:'',query:'', options:[]})\r\n\r\n/**\r\n * @typedef {{name:string, id:string, query:string, options:Array}} ListQueryState\r\n */\r\n\r\n/**\r\n * @param {ListQueryState} state\r\n * @param {*} action\r\n * @returns {* | ListQueryState}\r\n */\r\nexport default function introduction(state = initialState, action) {\r\n  switch (action.type) {\r\n    default :\r\n      return state\r\n  }\r\n}","export const SETUP = 'setup'\r\n\r\n\r\nconst initialState = {\r\n  name: SETUP\r\n}\r\n\r\nexport function createSetup() {\r\n  return {\r\n    name: SETUP\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{\r\n *          name:string}} SetupState\r\n */\r\n\r\n/**\r\n * @param {undefined | SetupState} state\r\n * @param { Action | PlayerNameAction | PlayerClassIdAction | PlayerRaceIdAction } action\r\n * @returns {* | SetupState}\r\n */\r\nexport default function introduction(state = initialState, action) {\r\n  switch (action.type) {\r\n    default :\r\n      return state\r\n  }\r\n}","//import rollDices from './roll-dices'\r\n//import introduction from './introduction'\r\n//import classSelection from './class-selection'\r\n//import townLobby from './town-lobby'\r\n//import assignDices from './assign-dices'\r\n//import battle from './battle'\r\nimport inputQuery from './input-query'\r\nimport listQuery from './list-query'\r\nimport setup from './setup'\r\n\r\nexport {\r\n  //rollDices, introduction, classSelection, townLobby, assignDices, battle,\r\ninputQuery, listQuery,setup}","import * as allClientStateReducers from './states'\r\n\r\nexport const PLAYER_NAME_SET = 'PLAYER_NAME_SET'\r\nexport const CLASS_ID_SET = 'CLASS_ID_SET'\r\nexport const RACE_ID_SET = 'RACE_ID_SET'\r\nexport const STACK_PUSH = 'STACK_PUSH'\r\nexport const STACK_POP = 'STACK_POP'\r\nexport const STACK_ACTION = 'STACK_ACTION'\r\n\r\n/**\r\n * @typedef {{type: string, playerName: string}} PlayerNameAction\r\n */\r\n\r\n/**\r\n * @param {string} playerName\r\n * @returns PlayerNameAction\r\n */\r\nexport function setPlayerNameAction(playerName) {\r\n  return {\r\n    type: PLAYER_NAME_SET,\r\n    playerName: playerName\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{type: string, classId: string}} PlayerClassIdAction\r\n */\r\n\r\n/**\r\n * @param {string} classId\r\n * @returns PlayerClassIdAction\r\n */\r\nexport function setPlayerClassIdAction(classId) {\r\n  return {\r\n    type: CLASS_ID_SET,\r\n    classId: classId\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{type: string, raceId: string}} PlayerRaceIdAction\r\n */\r\n\r\n/**\r\n * @param {string} raceId\r\n * @returns PlayerRaceIdAction\r\n */\r\nexport function setPlayerRaceIdAction(raceId) {\r\n  return {\r\n    type: RACE_ID_SET,\r\n    raceId: raceId\r\n  }\r\n}\r\n\r\n/**\r\n * @param action wrapped action\r\n * @returns {{type: string, action: Object}}\r\n */\r\nexport function stackAction(action){\r\n  return {\r\n    type : STACK_ACTION,\r\n    action : action\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{type: string, name: string, initialState: *}} PushClientStateAction\r\n */\r\n\r\n/**\r\n * @param {string} name\r\n * @param {*} initialState\r\n * @returns {{type: string, name: string, initialState: *}}\r\n */\r\nexport function pushClientStateAction(name, initialState){\r\n  return {\r\n    type: STACK_PUSH ,\r\n    name: name,\r\n    initialState : initialState\r\n  }\r\n}\r\n\r\nexport function popClientStateAction(returnState) {\r\n  return {\r\n    type: STACK_POP,\r\n    returnState : returnState\r\n  }\r\n}\r\n\r\n/**\r\n * @param {{classId:string}} state\r\n * @returns {string}\r\n */\r\nexport function getClassId(state) {\r\n  return state.classId\r\n}\r\n\r\n/**\r\n * @param {{stack:Array}} state\r\n * @returns {Array}\r\n */\r\nexport function getStack(state) {\r\n  return state ? state.stack : []\r\n}\r\n\r\n/**\r\n * @param {{playerName:string}} state\r\n * @returns {string}\r\n */\r\nexport function getPlayerName(state) {\r\n  return state.playerName\r\n}\r\n\r\n/**\r\n * @param {{stack:Array}} state\r\n * @returns {Object||undefined}\r\n */\r\nexport function getLastStackState(state){\r\n  return state.stack[state.stack.length - 1]\r\n}\r\n\r\n/**\r\n * @param {{stack:Array.<{name}>}} state\r\n */\r\nexport function getLastStackStateName(state){\r\n  const lastStackState = getLastStackState(state)\r\n  return lastStackState ? lastStackState.name : undefined\r\n}\r\n\r\n/**\r\n * @param {{stack:Array.<{name}>}} state\r\n * @param {string} name\r\n * @returns {Object}\r\n */\r\nexport function getStackStateWithName(state, name){\r\n  return state.stack.find(s => s.name === name)\r\n}\r\n\r\nconst initialState = {\r\n  playerName: 'Noname',\r\n  classId: 'mage',\r\n  raceId: 'none',\r\n  actions: [],\r\n  stack : []\r\n}\r\n\r\n/**\r\n * @typedef {{playerName: string, classId: string, raceId: string, actions: Array, stack: Array}} Context\r\n */\r\n\r\n/**\r\n * @param {Context} state\r\n * @param {PlayerNameAction|PlayerClassIdAction|PlayerRaceIdAction|PushClientStateAction} action\r\n * @param clientStateReducers\r\n * @returns {Context}\r\n */\r\nexport default function contextReducer(state = initialState, action, clientStateReducers = allClientStateReducers){\r\n  switch (action.type){\r\n    case PLAYER_NAME_SET :\r\n      return {\r\n        ...state,\r\n        playerName: action.playerName\r\n      }\r\n    case CLASS_ID_SET :\r\n      return {\r\n        ...state,\r\n        classId: action.classId\r\n      }\r\n    case RACE_ID_SET :\r\n      return {\r\n        ...state,\r\n        raceId: action.raceId\r\n      }\r\n    case STACK_PUSH :\r\n      return {\r\n        ...state,\r\n        stack : [...state.stack, clientStateReducers[action.name](action.initialState, {type: '@INIT@'})]\r\n      }\r\n    case STACK_POP :\r\n      return {\r\n        ...state,\r\n        stack: state.stack.slice(0, state.stack.length - 1)\r\n      }\r\n    case STACK_ACTION : {\r\n        const topAction = state.stack[state.stack.length-1]\r\n        if(topAction){\r\n          return {\r\n              ...state,\r\n              stack: state.stack.slice(0, state.stack.length - 1).concat(clientStateReducers[topAction.name](topAction, action.action))\r\n          }\r\n        }\r\n        return state\r\n    }\r\n    default : return state\r\n  }\r\n}","function s4() {\r\n  return Math.floor((1 + Math.random()) * 0x10000)\r\n    .toString(16)\r\n    .substring(1);\r\n}\r\n\r\nexport default function guid() {\r\n\r\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n    s4() + '-' + s4() + s4() + s4()\r\n}\r\n","export default {\r\n  debug(...args){\r\n    console.debug(...args)\r\n  },\r\n  info(...args){\r\n    console.info(...args)\r\n  },\r\n  warn(...args){\r\n    console.warn(...args)\r\n  },\r\n  error(...args){\r\n    console.error(...args)\r\n  }\r\n}","import contextReducer from './context-reducer'\r\n\r\nexport const CONTEXT_SPAWNED = 'CONTEXT_SPAWNED'\r\nexport const CONTEXT_DESPAWNED = 'CONTEXT_DESPAWNED'\r\nexport const CONTEXT_ACTION = 'CONTEXT_ACTION'\r\n\r\nexport function contextAction(guid, action){\r\n  return {\r\n    type : CONTEXT_ACTION,\r\n    guid : guid,\r\n    action : action\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} guid\r\n * @returns {{type: string, guid: string|undefined}}\r\n */\r\nexport function contextSpawnedAction(guid) {\r\n  return {\r\n    type: CONTEXT_SPAWNED,\r\n    guid: guid\r\n  }\r\n}\r\n\r\nexport function contextDespawnedAction(guid){\r\n  return {\r\n    type: CONTEXT_DESPAWNED,\r\n    guid: guid\r\n  }\r\n}\r\n\r\nexport default function allContextsReducer(state = {}, action){\r\n  switch(action.type){\r\n    case CONTEXT_SPAWNED: return {...state, [action.guid]: contextReducer(state[action.guid], action)}\r\n    case CONTEXT_DESPAWNED: return {...state, [action.guid]: contextReducer(state[action.guid], action)}\r\n    case CONTEXT_ACTION: return {...state, [action.guid]: contextReducer(state[action.guid], action.action)}\r\n    default : return state\r\n  }\r\n}\r\n\r\n","export const initialState = {\r\n  'action_shield': {\r\n    slots: [{\r\n      require: 1\r\n    }]\r\n  },\r\n  'action_maneuver': {\r\n    slots: [{\r\n      require: 3\r\n    }]\r\n  },\r\n  'action_throw': {\r\n    slots: [{\r\n      require: 6\r\n    }]\r\n  },\r\n  'action_fireball': {\r\n    slots: [\r\n      {\r\n        require: 5\r\n      },\r\n      {\r\n        require: 6\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{require:number}} Slot\r\n * @typedef {{slots:Array.<Slot>}} Action\r\n * @typedef {Object.<string, Action>} AllActionState\r\n */\r\n\r\n/**\r\n * @param {AllActionState} state\r\n * @param {*} action\r\n * @returns {AllActionState}\r\n */\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    default :\r\n      return state\r\n  }\r\n}","export const initialState = {\r\n  'class_mage' : {\r\n    actions : ['action_shield','action_maneuver', 'action_throw', 'action_fireball']\r\n  },\r\n  'class_druid' : {\r\n    actions : ['action_shield','action_maneuver', 'action_throw', 'action_fireball']\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{actions:Array.<string>}} Class\r\n * @typedef {Object.<string,Class>} AllClassesState\r\n */\r\n\r\n/**\r\n * @param {AllClassesState} state\r\n * @param {*} action\r\n * @returns {AllClassesState}\r\n */\r\nexport default function (state = initialState, action){\r\n  switch(action.type){\r\n    default : return state\r\n  }\r\n}","export const initialState = {\r\n  'race_human' : {\r\n    maxHp : 10\r\n  },\r\n  'race_elf' : {\r\n    maxHp : 10\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {{maxHp:number}} Race\r\n * @typedef {Object.<string,Race>} AllRacesState\r\n */\r\n\r\n/**\r\n * @param {AllRacesState} state\r\n * @param {*} action\r\n * @returns {AllRacesState}\r\n */\r\nexport default function (state = initialState, action){\r\n  switch(action.type){\r\n    default : return state\r\n  }\r\n}","export const MESSAGE = 'MESSAGE'\r\n\r\n/**\r\n * @typedef {{type: string, id:string, from: string, message: string}} MessageAction\r\n */\r\n\r\n/**\r\n * @param {string} id\r\n * @param {string} from\r\n * @param {string} message\r\n * @returns {MessageAction}\r\n */\r\nexport function messageAction(id, from, message) {\r\n  return {\r\n    type: MESSAGE,\r\n    id,\r\n    from,\r\n    message\r\n  }\r\n}\r\n\r\nconst initialState = []\r\n\r\n/**\r\n * @typedef {{id:string, from: string, message: string}} Message\r\n * @typedef {Array.<Message>} MessagesState\r\n */\r\n\r\n/**\r\n * @param {undefined | MessagesState} state\r\n * @param {MessageAction} action\r\n * @returns {* | MessagesState}\r\n */\r\nexport default function messagesReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case MESSAGE :\r\n      return state.concat({\r\n        id: action.id,\r\n        from: action.from,\r\n        message: action.message\r\n      })\r\n    default :\r\n      return state\r\n  }\r\n}","import allContextsReducer from './all-contexts-reducer'\r\nimport allActionsReducer from './all-actions-reducer'\r\nimport allClassesReducer from './all-classes-reducer'\r\nimport allRacesReducer from './all-races-reducer'\r\nimport messagesReducer from './messages-reducer'\r\n\r\nconst LOAD_STATE = 'LOAD_STATE'\r\n\r\n/**\r\n * @param {{classes:Array}} state\r\n * @returns {Array}\r\n */\r\nexport function allClassesSelector(state) {\r\n  return state.classes\r\n}\r\n\r\n/**\r\n * @param {{races:Array}} state\r\n * @returns {Array}\r\n */\r\nexport function allRacesSelector(state) {\r\n  return state.races\r\n}\r\n\r\nexport function loadStateAction(state) {\r\n  return {\r\n    type : LOAD_STATE,\r\n    state : state\r\n  }\r\n}\r\n\r\n/**\r\n * @param state\r\n * @param guid\r\n * @returns {Context}\r\n */\r\nexport function getContext(state, guid){\r\n  return state.contexts[guid]\r\n}\r\n\r\nexport default function rootReducer(state = {}, action) {\r\n  switch (action.type) {\r\n    case LOAD_STATE :\r\n      return action.state\r\n    default :\r\n      return {\r\n        messages: messagesReducer(state.messages, action),\r\n        actions: allActionsReducer(state.actions, action),\r\n        classes: allClassesReducer(state.classes, action),\r\n        races: allRacesReducer(state.races, action),\r\n        contexts: allContextsReducer(state.contexts, action)\r\n      }\r\n  }\r\n}\r\n","import guid from '../utils/guid'\r\nimport log from './log'\r\nimport {loadStateAction} from '../model/index'\r\n\r\nexport function getClientGuid(){\r\n  let authToken = localStorage.getItem('auth-token')\r\n  if(!authToken){\r\n    authToken = guid()\r\n    localStorage.setItem('auth-token', authToken)\r\n  }\r\n  return authToken\r\n}\r\n\r\nexport default function command({ dispatch, getState }) {\r\n  const socket = io()\r\n\r\n\r\n\r\n  return (next) => {\r\n    socket.on('connect', function onConnect(){\r\n      log.info('connected')\r\n      socket.emit('authentication', getClientGuid())\r\n    })\r\n\r\n    socket.on('state_sync', (state)=>{\r\n      log.info('state_sync', state)\r\n      next(loadStateAction(state))\r\n    })\r\n\r\n    socket.on('action', function onAction(action){\r\n      log.info('dispatched', JSON.stringify(action, undefined, 2))\r\n      log.info('state before',getState())\r\n      next(action)\r\n      log.info('state after',getState())\r\n    })\r\n\r\n    return (action) => {\r\n      const actionJSON = JSON.stringify(action)\r\n      log.info(`Action: ${actionJSON}`)\r\n      socket.emit('command_request', action)\r\n      return {}\r\n    }\r\n  }\r\n}\r\n","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport * as clientStates from './states'\r\nimport {getStack} from '../model/context-reducer'\r\nimport {getClientGuid} from '../client/client-io'\r\nimport {getContext} from '../model/index'\r\nimport {queryResponseAction} from '../model/states/input-query'\r\n\r\nconst stackViewMapping = {\r\n  'setup:inputQuery': ([setupState, {query}], dispatch) => {\r\n    let inputVal = '';\r\n    return <div>\r\n      <span>Please provide your {query}</span>\r\n      <input type=\"text\" onChange={(event)=>{inputVal = event.target.value}}/>\r\n      <input type=\"button\" value=\"Send\" onClick={()=>{dispatch(queryResponseAction(inputVal))}}/>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport function AppContainer({clientStateName, stack, dispatch}) {\r\n  const view = stackViewMapping[clientStateName] || (()=><div>View: '{clientStateName}' not found</div>);\r\n  return view(stack, dispatch);\r\n}\r\n\r\nconst mapDispatchToProps = function (dispatch) {\r\n  return {dispatch}\r\n}\r\n\r\nconst mapStateToProps = function (state) {\r\n  const stack = getStack(getContext(state, getClientGuid()));\r\n  return {\r\n    clientStateName: stack.map(state => state.name).join(':'),\r\n    stack : stack\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppContainer)","/*global __REDUX_DEVTOOLS_EXTENSION_COMPOSE__ */\r\n\r\nimport AppContainer from '../view/AppContainer'\r\nimport rootReducer from '../model'\r\nimport commandMiddleware from './client-io'\r\nimport {createStore, applyMiddleware, compose} from 'redux'\r\nimport {Provider} from 'react-redux'\r\nimport * as ReactDOM from 'react-dom'\r\nimport * as React from 'react'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(commandMiddleware)))\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n      <AppContainer/>\r\n    </Provider>\r\n    ,document.getElementById('mount'))\r\n"],"names":["INPUT_QUERY","QUERY_RESPONSE","queryResponseAction","message","createInputQuery","id","query","initialState","introduction","state","action","type","LIST_QUERY","createListQuery","options","SETUP","PLAYER_NAME_SET","CLASS_ID_SET","RACE_ID_SET","STACK_PUSH","STACK_POP","STACK_ACTION","getStack","stack","contextReducer","clientStateReducers","allClientStateReducers","playerName","classId","raceId","name","slice","length","topAction","concat","s4","Math","floor","random","toString","substring","guid","args","debug","info","warn","error","CONTEXT_SPAWNED","CONTEXT_DESPAWNED","CONTEXT_ACTION","allContextsReducer","MESSAGE","messagesReducer","from","LOAD_STATE","loadStateAction","getContext","contexts","rootReducer","messages","allActionsReducer","actions","allClassesReducer","classes","allRacesReducer","races","getClientGuid","authToken","localStorage","getItem","setItem","command","dispatch","getState","socket","io","next","on","onConnect","emit","onAction","JSON","stringify","undefined","actionJSON","stackViewMapping","setupState","inputVal","React.createElement","event","target","value","AppContainer","clientStateName","view","mapDispatchToProps","mapStateToProps","map","join","connect","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","commandMiddleware","ReactDOM","document","getElementById"],"mappings":";;;AAAA;;;;;;2BAQA;;ACRO,MAAMA,cAAc,YAApB;;AAEP,AAAO,MAAMC,iBAAiB,4BAAvB;;;;;;;;;;AAUP,AAAO,SAASC,mBAAT,CAA6BC,OAA7B,EAAqC;SACnC;UACCF,cADD;;GAAP;;;;;;;AAUF,AAAO;;;;;;AAQP,AAAO;;;;;;;;;;;AAaP,AAAO,SAASG,gBAAT,CAA0B,EAACC,KAAK,EAAN,EAAUC,QAAQ,EAAlB,EAA1B,EAAiD;SAC/C;UACCN,WADD;MAAA;;GAAP;;;AAOF,MAAMO,iBAAeH,iBAAiB,EAACC,IAAG,EAAJ,EAAQC,OAAM,EAAd,EAAjB,CAArB;;;;;;;;;;;AAWA,AAAe,SAASE,YAAT,CAAsBC,QAAQF,cAA9B,EAA4CG,MAA5C,EAAoD;UACzDA,OAAOC,IAAf;;aAEWF,KAAP;;;;AClEC,MAAMG,aAAa,WAAnB;;AAEP,AAAO;;;;;;AAMP,AAAO;;;;;;AAWP,AAAO;;;;;;AAQP,AAAO;;;;;;AAQP,AAAO;;;;;;;;;;;;AAcP,AAAO,SAASC,eAAT,CAAyB,EAACR,KAAK,MAAN,EAAcC,QAAQ,MAAtB,EAA8BQ,UAAU,EAAxC,EAAzB,EAAsE;SACpE;UACCF,UADD;MAAA;SAAA;;GAAP;;;AAQF,MAAML,iBAAeM,gBAAgB,EAACR,IAAG,EAAJ,EAAOC,OAAM,EAAb,EAAiBQ,SAAQ,EAAzB,EAAhB,CAArB;;;;;;;;;;;AAWA,AAAe,SAASN,cAAT,CAAsBC,QAAQF,cAA9B,EAA4CG,MAA5C,EAAoD;UACzDA,OAAOC,IAAf;;aAEWF,KAAP;;;;ACxEC,MAAMM,QAAQ,OAAd;;AAGP,MAAMR,iBAAe;QACbQ;CADR;;AAIA,AAAO;;;;;;;;;;;;AAgBP,AAAe,SAASP,cAAT,CAAsBC,QAAQF,cAA9B,EAA4CG,MAA5C,EAAoD;UACzDA,OAAOC,IAAf;;aAEWF,KAAP;;;;AC1BN;;;;;;AAMA,AACA,AACA,AAEA;;;;;;;;ACRO,MAAMO,kBAAkB,iBAAxB;AACP,AAAO,MAAMC,eAAe,cAArB;AACP,AAAO,MAAMC,cAAc,aAApB;AACP,AAAO,MAAMC,aAAa,YAAnB;AACP,AAAO,MAAMC,YAAY,WAAlB;AACP,AAAO,MAAMC,eAAe,cAArB;;;;;;;;;;AAUP,AAAO;;;;;;;;;;AAeP,AAAO;;;;;;;;;;AAeP,AAAO;;;;;;AAWP,AAAO;;;;;;;;;;;AAgBP,AAAO;;AAQP,AAAO;;;;;;AAWP,AAAO;;;;;;AAQP,AAAO,SAASC,QAAT,CAAkBb,KAAlB,EAAyB;SACvBA,QAAQA,MAAMc,KAAd,GAAsB,EAA7B;;;;;;;AAOF,AAAO;;;;;;AAQP,AAAO;;;;;AAOP,AAAO;;;;;;;AAUP,AAAO;;AAIP,MAAMhB,eAAe;cACP,QADO;WAEV,MAFU;UAGX,MAHW;WAIV,EAJU;SAKX;CALV;;;;;;;;;;;;AAkBA,AAAe,SAASiB,cAAT,CAAwBf,QAAQF,YAAhC,EAA8CG,MAA9C,EAAsDe,sBAAsBC,sBAA5E,EAAmG;UACxGhB,OAAOC,IAAf;SACOK,eAAL;+BAEOP,KADL;oBAEcC,OAAOiB;;SAElBV,YAAL;+BAEOR,KADL;iBAEWC,OAAOkB;;SAEfV,WAAL;+BAEOT,KADL;gBAEUC,OAAOmB;;SAEdV,UAAL;+BAEOV,KADL;eAEU,CAAC,GAAGA,MAAMc,KAAV,EAAiBE,oBAAoBf,OAAOoB,IAA3B,EAAiCpB,OAAOH,YAAxC,EAAsD,EAACI,MAAM,QAAP,EAAtD,CAAjB;;SAEPS,SAAL;+BAEOX,KADL;eAESA,MAAMc,KAAN,CAAYQ,KAAZ,CAAkB,CAAlB,EAAqBtB,MAAMc,KAAN,CAAYS,MAAZ,GAAqB,CAA1C;;SAENX,YAAL;;cACUY,YAAYxB,MAAMc,KAAN,CAAYd,MAAMc,KAAN,CAAYS,MAAZ,GAAmB,CAA/B,CAAlB;YACGC,SAAH,EAAa;mCAEJxB,KADP;mBAEWA,MAAMc,KAAN,CAAYQ,KAAZ,CAAkB,CAAlB,EAAqBtB,MAAMc,KAAN,CAAYS,MAAZ,GAAqB,CAA1C,EAA6CE,MAA7C,CAAoDT,oBAAoBQ,UAAUH,IAA9B,EAAoCG,SAApC,EAA+CvB,OAAOA,MAAtD,CAApD;;;eAGND,KAAP;;;aAEaA,KAAP;;;;ACjMd,SAAS0B,EAAT,GAAc;SACLC,KAAKC,KAAL,CAAW,CAAC,IAAID,KAAKE,MAAL,EAAL,IAAsB,OAAjC,EACJC,QADI,CACK,EADL,EAEJC,SAFI,CAEM,CAFN,CAAP;;;AAKF,AAAe,SAASC,IAAT,GAAgB;;SAEtBN,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GACLA,IADK,GACE,GADF,GACQA,IADR,GACeA,IADf,GACsBA,IAD7B;;;ACRF,UAAe;QACP,GAAGO,IAAT,EAAc;YACJC,KAAR,CAAc,GAAGD,IAAjB;GAFW;OAIR,GAAGA,IAAR,EAAa;YACHE,IAAR,CAAa,GAAGF,IAAhB;GALW;OAOR,GAAGA,IAAR,EAAa;YACHG,IAAR,CAAa,GAAGH,IAAhB;GARW;QAUP,GAAGA,IAAT,EAAc;YACJI,KAAR,CAAc,GAAGJ,IAAjB;;CAXJ;;ACEO,MAAMK,kBAAkB,iBAAxB;AACP,AAAO,MAAMC,oBAAoB,mBAA1B;AACP,AAAO,MAAMC,iBAAiB,gBAAvB;;AAEP,AAAO;;;;;;AAYP,AAAO;;AAOP,AAAO;;AAOP,AAAe,SAASC,kBAAT,CAA4BzC,QAAQ,EAApC,EAAwCC,MAAxC,EAA+C;UACrDA,OAAOC,IAAd;SACOoC,eAAL;+BAAiCtC,KAAX,IAAkB,CAACC,OAAO+B,IAAR,GAAejB,eAAef,MAAMC,OAAO+B,IAAb,CAAf,EAAmC/B,MAAnC,CAAjC;SACjBsC,iBAAL;+BAAmCvC,KAAX,IAAkB,CAACC,OAAO+B,IAAR,GAAejB,eAAef,MAAMC,OAAO+B,IAAb,CAAf,EAAmC/B,MAAnC,CAAjC;SACnBuC,cAAL;+BAAgCxC,KAAX,IAAkB,CAACC,OAAO+B,IAAR,GAAejB,eAAef,MAAMC,OAAO+B,IAAb,CAAf,EAAmC/B,OAAOA,MAA1C,CAAjC;;aACJD,KAAP;;;;ACrCP,MAAMF,iBAAe;mBACT;WACR,CAAC;eACG;KADJ;GAFiB;qBAMP;WACV,CAAC;eACG;KADJ;GAPiB;kBAWV;WACP,CAAC;eACG;KADJ;GAZiB;qBAgBP;WACV,CACL;eACW;KAFN,EAIL;eACW;KALN;;CAjBJ;;;;;;;;;;;;;AAuCP,wBAAe,UAAUE,QAAQF,cAAlB,EAAgCG,MAAhC,EAAwC;UAC7CA,OAAOC,IAAf;;aAEWF,KAAP;;;;AC1CC,MAAMF,iBAAe;gBACX;aACH,CAAC,eAAD,EAAiB,iBAAjB,EAAoC,cAApC,EAAoD,iBAApD;GAFc;iBAIV;aACJ,CAAC,eAAD,EAAiB,iBAAjB,EAAoC,cAApC,EAAoD,iBAApD;;CALP;;;;;;;;;;;;AAmBP,wBAAe,UAAUE,QAAQF,cAAlB,EAAgCG,MAAhC,EAAuC;UAC7CA,OAAOC,IAAd;;aACmBF,KAAP;;;;ACrBP,MAAMF,iBAAe;gBACX;WACL;GAFgB;cAIb;WACH;;CALL;;;;;;;;;;;;AAmBP,sBAAe,UAAUE,QAAQF,cAAlB,EAAgCG,MAAhC,EAAuC;UAC7CA,OAAOC,IAAd;;aACmBF,KAAP;;;;ACrBP,MAAM0C,UAAU,SAAhB;;;;;;;;;;;;AAYP,AAAO;;AASP,MAAM5C,iBAAe,EAArB;;;;;;;;;;;;AAYA,AAAe,SAAS6C,eAAT,CAAyB3C,QAAQF,cAAjC,EAA+CG,MAA/C,EAAuD;UAC5DA,OAAOC,IAAf;SACOwC,OAAL;aACS1C,MAAMyB,MAAN,CAAa;YACdxB,OAAOL,EADO;cAEZK,OAAO2C,IAFK;iBAGT3C,OAAOP;OAHX,CAAP;;aAMOM,KAAP;;;;ACpCN,MAAM6C,aAAa,YAAnB;;;;;;AAMA,AAAO;;;;;;AAQP,AAAO;;AAIP,AAAO,SAASC,eAAT,CAAyB9C,KAAzB,EAAgC;SAC9B;UACE6C,UADF;WAEG7C;GAFV;;;;;;;;AAWF,AAAO,SAAS+C,UAAT,CAAoB/C,KAApB,EAA2BgC,IAA3B,EAAgC;SAC9BhC,MAAMgD,QAAN,CAAehB,IAAf,CAAP;;;AAGF,AAAe,SAASiB,WAAT,CAAqBjD,QAAQ,EAA7B,EAAiCC,MAAjC,EAAyC;UAC9CA,OAAOC,IAAf;SACO2C,UAAL;aACS5C,OAAOD,KAAd;;aAEO;kBACK2C,gBAAgB3C,MAAMkD,QAAtB,EAAgCjD,MAAhC,CADL;iBAEIkD,kBAAkBnD,MAAMoD,OAAxB,EAAiCnD,MAAjC,CAFJ;iBAGIoD,kBAAkBrD,MAAMsD,OAAxB,EAAiCrD,MAAjC,CAHJ;eAIEsD,gBAAgBvD,MAAMwD,KAAtB,EAA6BvD,MAA7B,CAJF;kBAKKwC,mBAAmBzC,MAAMgD,QAAzB,EAAmC/C,MAAnC;OALZ;;;;ACzCC,SAASwD,aAAT,GAAwB;MACzBC,YAAYC,aAAaC,OAAb,CAAqB,YAArB,CAAhB;MACG,CAACF,SAAJ,EAAc;gBACA1B,MAAZ;iBACa6B,OAAb,CAAqB,YAArB,EAAmCH,SAAnC;;SAEKA,SAAP;;;AAGF,AAAe,SAASI,OAAT,CAAiB,EAAEC,QAAF,EAAYC,QAAZ,EAAjB,EAAyC;QAChDC,SAASC,IAAf;;SAIQC,IAAD,IAAU;WACRC,EAAP,CAAU,SAAV,EAAqB,SAASC,SAAT,GAAoB;UACnClC,IAAJ,CAAS,WAAT;aACOmC,IAAP,CAAY,gBAAZ,EAA8Bb,eAA9B;KAFF;;WAKOW,EAAP,CAAU,YAAV,EAAyBpE,KAAD,IAAS;UAC3BmC,IAAJ,CAAS,YAAT,EAAuBnC,KAAvB;WACK8C,gBAAgB9C,KAAhB,CAAL;KAFF;;WAKOoE,EAAP,CAAU,QAAV,EAAoB,SAASG,QAAT,CAAkBtE,MAAlB,EAAyB;UACvCkC,IAAJ,CAAS,YAAT,EAAuBqC,KAAKC,SAAL,CAAexE,MAAf,EAAuByE,SAAvB,EAAkC,CAAlC,CAAvB;UACIvC,IAAJ,CAAS,cAAT,EAAwB6B,UAAxB;WACK/D,MAAL;UACIkC,IAAJ,CAAS,aAAT,EAAuB6B,UAAvB;KAJF;;WAOQ/D,MAAD,IAAY;YACX0E,aAAaH,KAAKC,SAAL,CAAexE,MAAf,CAAnB;UACIkC,IAAJ,CAAU,WAAUwC,UAAW,EAA/B;aACOL,IAAP,CAAY,iBAAZ,EAA+BrE,MAA/B;aACO,EAAP;KAJF;GAlBF;;;ACTF,MAAM2E,mBAAmB;sBACH,CAAC,CAACC,UAAD,EAAa,EAAChF,KAAD,EAAb,CAAD,EAAwBkE,QAAxB,KAAqC;QACnDe,WAAW,EAAf;WACOC;;;;;;;;OAAA;qCAEE,MAAK,MAAZ,EAAmB,UAAWC,KAAD,IAAS;qBAAYA,MAAMC,MAAN,CAAaC,KAAxB;SAAvC,GAFK;qCAGE,MAAK,QAAZ,EAAqB,OAAM,MAA3B,EAAkC,SAAS,MAAI;mBAAUzF,oBAAoBqF,QAApB,CAAT;SAAhD;KAHF;;CAHJ;;AAWA,AAAO,SAASK,YAAT,CAAsB,EAACC,eAAD,EAAkBtE,KAAlB,EAAyBiD,QAAzB,EAAtB,EAA0D;QACzDsB,OAAOT,iBAAiBQ,eAAjB,MAAsC,MAAIL;;;;mBAAA;;GAA1C,CAAb;SACOM,KAAKvE,KAAL,EAAYiD,QAAZ,CAAP;;;AAGF,MAAMuB,qBAAqB,UAAUvB,QAAV,EAAoB;SACtC,EAACA,QAAD,EAAP;CADF;;AAIA,MAAMwB,kBAAkB,UAAUvF,KAAV,EAAiB;QACjCc,QAAQD,SAASkC,WAAW/C,KAAX,EAAkByD,eAAlB,CAAT,CAAd;SACO;qBACY3C,MAAM0E,GAAN,CAAUxF,SAASA,MAAMqB,IAAzB,EAA+BoE,IAA/B,CAAoC,GAApC,CADZ;WAEG3E;GAFV;CAFF;;AAQA,qBAAe4E,mBAAQH,eAAR,EAAyBD,kBAAzB,EAA6CH,YAA7C,CAAf;;ACrCA;;AAEA,AACA,AACA,AACA,AACA,AACA,AACA,AAEA,MAAMQ,mBAAmBC,OAAOC,oCAAP,IAA+CC,aAAxE;AACA,MAAMC,QAAQC,kBAAY/C,WAAZ,EAAyB0C,iBAAiBM,sBAAgBC,OAAhB,CAAjB,CAAzB,CAAd;;AAEAC,eAAA,CACIpB;qBAAA;IAAU,OAAOgB,KAAjB;sBACGZ,cAAD;CAFN,EAIKiB,SAASC,cAAT,CAAwB,OAAxB,CAJL;;"}