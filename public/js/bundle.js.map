{"version":3,"file":null,"sources":["../../src/model/selectors/client.js","../../src/view/messagelog/MessageLogComponent.js","../../src/view/messagelog/MessageComponent.js","../../src/view/client-states/IntroductionContainer.js","../../src/view/client-states/ClassSelectionContainer.js","../../src/view/client-states/TownLobbyContainer.js","../../src/view/dicepool/DicePoolComponent.js","../../src/view/dicepool/DiceComponent.js","../../src/view/dicepool/DiceSlotComponent.js","../../src/view/actionpool/ActionPoolComponent.js","../../src/view/actionpool/ActionComponent.js","../../src/view/client-states/RollDicesContainer.js","../../src/model/selectors/state/assign-dices.js","../../src/view/client-states/AssignDicesContainer.js","../../src/view/AppContainer.js","../../src/utils/guid.js","../../src/utils/shallow-equal.js","../../src/utils/changed.js","../../src/utils/filter-first.js","../../src/model/client-action-state/roll-dices.js","../../src/model/client-action-state/introduction.js","../../src/model/client-action-state/class-selection.js","../../src/model/client-action-state/town-lobby.js","../../src/model/client-action-state/assign-dices.js","../../src/model/action-state-reducer.js","../../src/model/context-reducer.js","../../src/model/global-reducer.js","../../src/client/log.js","../../src/client/client-io.js","../../src/client/index.js"],"sourcesContent":["export function name(state){\n  return state.name\n}\n\nexport function className(state){\n  return state.className\n}\n\nexport function actions(state){\n  return state.actions\n}\n\nexport function actionState(state){\n  return state.actionState\n}\n\nexport function actionStateCount(state){\n  return actionState(state).length\n}\n\nexport function currentActionState(state){\n  return state.actionState[state.actionState.length - 1]\n}\n\nexport function currentActionStateName(state){\n  return currentActionState(state).name\n}","import css from './style.css'\nimport * as React from 'react'\n\nexport default class MessageLogContainer extends React.Component {\n\n  constructor() {\n    super()\n  }\n\n  componentDidUpdate(){\n    this.refs.messages.scrollTop = this.refs.messages.scrollHeight\n    this.refs.chatInput.focus()\n  }\n\n  render(){\n\n\n    let handleClick = ()=>{\n      this.props.onSend(this.refs.chatInput.value)\n      this.refs.chatInput.value = ''\n    }\n\n    let handleKeyboard = (e)=>{\n      if (e.key === 'Enter') {\n        handleClick()\n      }\n    }\n\n    return <div className={`${this.props.className} ${css.messageLogContainer}`}>\n      <div key=\"list\" ref=\"messages\" className={css.messageLogContainerList}>\n        { this.props.children }\n      </div>\n      <input key=\"input\" className={css.messageLogContainerInput} ref=\"chatInput\" onKeyUp={handleKeyboard}></input>\n      <button key=\"send\" className={css.messageLogContainerSend} onClick={handleClick} >Send</button>\n    </div>\n  }\n}","import css from './style.css'\nimport * as React from 'react'\n\nexport default class MessageLogContainer extends React.Component {\n\n  constructor() {\n    super()\n  }\n\n  render(){\n    const {id, from, message} = this.props\n\n    return <div key={id}><span className={css.messageAuthorName}>{from}</span>:{message}</div>\n  }\n}","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\n\nimport {MessageLog, Message} from '../messagelog'\n\nclass IntroductionComponent extends  React.Component {\n  constructor() {\n    super()\n  }\n\n  render() {\n    const {messages, onSend} = this.props\n\n    return <div className={`${css.defaultState} ${css.introductionState}`}>\n      <MessageLog onSend={onSend} className={css.chat}>\n        {messages.map(({id, from, message}) => <Message key={id} from={from} message={message}></Message>)}\n      </MessageLog>\n    </div>\n  }\n}\n\nconst mapStateToDispatch = (dispatch) => { return {\n  onSend: (command) => dispatch({type: 'COMMAND_REQUEST', command: command})\n} }\n\nconst mapStateToProps = (state) => {\n  return {\n    messages: state.messages\n  }\n}\n\nexport default connect(mapStateToProps, mapStateToDispatch)(IntroductionComponent)\n","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\n\nimport {MessageLog, Message} from '../messagelog'\n\nclass ClassSelectionComponent extends  React.Component {\n  constructor() {\n    super()\n  }\n\n  render() {\n    const {messages, onSend} = this.props\n\n    return <div className={`${css.defaultState} ${css.classSelectionState}`}>\n      <MessageLog onSend={onSend} className={css.chat}>\n        {messages.map(({id, from, message}) => <Message key={id} from={from} message={message}></Message>)}\n      </MessageLog>\n    </div>\n  }\n}\n\nconst mapStateToDispatch = (dispatch) => { return {\n  onSend: (command) => dispatch({type: 'COMMAND_REQUEST', command: command})\n} }\n\nconst mapStateToProps = (state) => {\n  return {\n    messages: state.messages\n  }\n}\n\nexport default connect(mapStateToProps, mapStateToDispatch)(ClassSelectionComponent)","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\n\nimport {MessageLog, Message} from '../messagelog'\n\nclass TownLobbyComponent extends  React.Component {\n  constructor() {\n    super()\n  }\n\n  render() {\n    const {messages, onSend} = this.props\n\n    return <div className={`${css.defaultState} ${css.townLobbyState}`}>\n      <MessageLog onSend={onSend} className={css.chat}>\n        {messages.map(({id, from, message}) => <Message key={id} from={from} message={message}></Message>)}\n      </MessageLog>\n    </div>\n  }\n}\n\nconst mapStateToDispatch = (dispatch) => { return {\n  onSend: (command) => dispatch({type: 'COMMAND_REQUEST', command: command})\n} }\n\nconst mapStateToProps = (state) => {\n  return {\n    messages: state.messages\n  }\n}\n\nexport default connect(mapStateToProps, mapStateToDispatch)(TownLobbyComponent)\n","import css from 'style.css'\nimport * as React from 'react'\n\nexport default class DicePoolComponent extends React.Component {\n\n  render(){\n    const {className} = this.props\n\n    return <div className={`${className} ${css.dicePoolComponent}`}>\n      {this.props.children}\n    </div>\n  }\n}\n","import css from 'style.css'\nimport * as React from 'react'\n\nexport default class DiceComponent extends React.Component {\n\n  render(){\n    const {\n      className,\n      face,\n      lock,\n      onClick} = this.props\n\n    const imagePath = `/public/img/dices/${face}_dots.png`\n\n    return <div className={`${className} ${css.dice} ${lock ? css.diceLocked : ''}`}\n      onClick={onClick}>\n      <img src={imagePath} width=\"32px\" height=\"32px\"></img>\n    </div>\n  }\n}\n","import css from 'style.css'\nimport * as React from 'react'\n\nexport default class DiceSlotComponent extends React.Component {\n\n  render(){\n    const {\n      className,\n      face,\n      onClick} = this.props\n\n    const imagePath = `url(/public/img/dices/${face}_dots_slot.png)`\n    const style = {\n      background : imagePath,\n      backgroundSize: '32px 32px' ,\n      backgroundRepeat: 'no-repeat'\n    }\n\n    return <div className={`${className} ${css.diceSlot}`}\n                onClick={onClick} style={style}>\n      {this.props.children}\n    </div>\n  }\n}","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\n\nclass ActionPoolComponent extends React.Component {\n  constructor(){\n    super()\n  }\n\n  render() {\n    const {className} = this.props\n    return <div className={`${this.props.className} ${css.actionPoolComponent}`}>\n      {this.props.children}\n    </div>\n  }\n}\nconst mapStateToProps = (state) => ({\n  actions : state.actions\n})\n\nconst mapDispatchToProps = (dispatch)=>({})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActionPoolComponent)\n","import css from './style.css'\nimport * as React from 'react'\n\nexport default class ActionComponent extends React.Component {\n  constructor() {\n    super()\n  }\n\n  render(){\n\n    const {name} = this.props\n\n    return <div className={`${this.props.className} ${css.actionComponent}`}>\n      {name}\n      <div className={css.diceSlot}>{this.props.children}</div>\n    </div>\n  }\n}\n","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\nimport {currentActionState} from '../../model/selectors/client'\n\nimport {MessageLog, Message} from '../messagelog'\nimport {DicePool, Dice, DiceSlot} from '../dicepool'\nimport {ActionPool, Action} from '../actionpool'\n\nclass RollDicesContainer extends  React.Component {\n  constructor() {\n    super()\n  }\n\n  render() {\n    const {messages, onSend, onReroll, onLock, dices, locks, actions} = this.props\n\n    return <div className={`${css.defaultState} ${css.rollDicesState}`}>\n      <MessageLog onSend={onSend} className={css.chat}>\n        {messages.map(({id, from, message}) => <Message key={id} from={from} message={message}></Message>)}\n      </MessageLog>\n      <DicePool>\n        <button className={css.rerollButton} onClick={(event)=>{onReroll()}}>Reroll dices</button>\n        {dices.map((number, index)=><Dice className={css.diceSpace} key={index} face={number} lock={locks[index]} onClick={onLock.bind(undefined,index)}></Dice>)}\n      </DicePool>\n      <ActionPool className={css.actionpool}>\n        {actions.map((action, actionIndex) =>\n          <Action key={actionIndex} name={action.name}>\n            {action.slots.map((slot, slotIndex) => <DiceSlot key={slotIndex} face={slot.require}>\n            </DiceSlot>)}\n          </Action>)}\n      </ActionPool>\n    </div>\n  }\n}\n\nconst mapStateToDispatch = (dispatch) => { return {\n  onSend: (command) => dispatch({type: 'COMMAND_REQUEST', command: command}),\n  onReroll : ()=> dispatch({type: 'COMMAND_REQUEST', command: '/reroll'}),\n  onLock:(index)=>dispatch({type: 'COMMAND_REQUEST', command: `/lock ${index}`})\n} }\n\nconst mapStateToProps = (state) => {\n  return {\n    dices : currentActionState(state).rolledDices,\n    locks : currentActionState(state).locks,\n    messages: state.messages,\n    actions: state.actions\n  }\n}\n\nexport default connect(mapStateToProps, mapStateToDispatch)(RollDicesContainer)\n","export function rolledDices(state){\n  return state.rolledDices\n}\n\nexport function currentDices(state){\n  return state.currentDices\n}\n\nexport function assignedActions(state){\n  return state.actions\n}","import css from './style.css'\nimport * as React from 'react'\nimport {connect} from 'react-redux'\nimport {currentActionState} from '../../model/selectors/client'\n\nimport {MessageLog, Message} from '../messagelog'\nimport {DicePool, Dice, DiceSlot} from '../dicepool'\nimport {ActionPool, Action} from '../actionpool'\nimport {currentDices, assignedActions} from '../../model/selectors/state/assign-dices'\n\nclass AssignActionsContainer extends React.Component {\n  constructor() {\n    super()\n  }\n\n  renderDice(actions, actionIndex, slotIndex){\n    const action = actions[actionIndex]\n    if(!action) return undefined\n    const dice = action[slotIndex]\n    if(dice){\n      return <Dice face={dice}/>\n    } else {\n      return undefined\n    }\n  }\n\n  render() {\n    const {messages, onSend, onReset, onAssign, onDone, dices, actions, assignedActions} = this.props\n    return <div className={`${css.defaultState} ${css.assignDicesState}`}>\n      <MessageLog onSend={onSend} className={css.chat}>\n        {messages.map(({id, from, message}) => <Message key={id} from={from}\n                                                        message={message}/>)}\n      </MessageLog>\n      <DicePool>\n        <button className={css.midButton} onClick={onReset}>Reset dices</button>\n        <button className={css.midButton} onClick={onDone}>Done</button>\n        {dices.map((number, index) => <Dice className={css.diceSpace} key={index} face={number}/>)}\n      </DicePool>\n      <ActionPool className={css.actionpool}>\n        {actions.map((action, actionIndex) =>\n          <Action key={actionIndex} name={action.name}>\n            {action.slots.map((slot, slotIndex) => <DiceSlot key={slotIndex} face={slot.require}\n                                                             onClick={onAssign.bind(undefined, actionIndex, slotIndex)}>\n              { this.renderDice(assignedActions, actionIndex, slotIndex)}\n            </DiceSlot>)}\n          </Action>)}\n      </ActionPool>\n    </div>\n  }\n}\n\nconst mapStateToDispatch = (dispatch) => {\n  return {\n    onSend: (command) => dispatch({type: 'COMMAND_REQUEST', command: command}),\n    onReset: () => dispatch({type: 'COMMAND_REQUEST', command: '/reset'}),\n    onDone: () => dispatch({type: 'COMMAND_REQUEST', command: '/done'}),\n    onAssign: (actionIndex, slotIndex) => dispatch({\n      type: 'COMMAND_REQUEST',\n      command: `/assign ${actionIndex} ${slotIndex}`\n    })\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    dices: currentDices(currentActionState(state)),\n    assignedActions : assignedActions(currentActionState(state)),\n    messages: state.messages,\n    actions: state.actions\n  }\n}\n\nexport default connect(mapStateToProps, mapStateToDispatch)(AssignActionsContainer)","import * as React from 'react'\nimport {connect} from 'react-redux'\nimport {currentActionState} from '../model/selectors/client'\n\nimport * as clientStates from './client-states'\n\nclass AppContainer extends React.Component {\n  constructor() {\n    super()\n  }\n\n  render(){\n    const {clientState} = this.props\n    if(!clientState) return <div>Loading...</div>\n\n    const StateContainer = clientStates[clientState.name]\n    return <StateContainer />\n  }\n}\n\nconst mapDispatchToProps = function(dispatch) {\n  return {\n  }\n}\n\nconst mapStateToProps = function(state) {\n  return {\n    clientState: currentActionState(state)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppContainer)","function s4() {\n  return Math.floor((1 + Math.random()) * 0x10000)\n    .toString(16)\n    .substring(1);\n}\n\nexport default function guid() {\n\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n    s4() + '-' + s4() + s4() + s4()\n}\n","export default function shallowEqual(oldState, newState){\n  const resultOldToNew = Object.keys(oldState).reduce((result, oldKey) => {\n    return result === true ? result : oldState[oldKey] !== newState[oldKey]\n  }, false)\n\n  const resultNewToOld = Object.keys(newState).reduce((result, newKey) => {\n    return result === true ? result : oldState[newKey] !== newState[newKey]\n  }, false)\n\n  return !resultNewToOld && !resultOldToNew\n}","import shallowEqual from './shallow-equal'\n\nexport default function changed(oldState, newState){\n\n  return shallowEqual(oldState, newState) ? oldState : newState\n}","export default function filterFirst(array, element){\n  let found = false\n  let newArray= []\n  array.forEach(el => {\n    if(el != element || found){\n      newArray.push(el)\n    } else {\n      found = true\n    }\n  })\n  return newArray\n}","const ROLL = 'ROLL_DICES:ROLL'\nconst LOCK = 'ROLL_DICES:LOCK'\n\nexport function roll(guid, rolledDices){\n  return {\n    type: ROLL,\n    guid : guid,\n    rolledDices : rolledDices\n  }\n}\n\nexport function lock(guid, locks){\n  return {\n    type: LOCK,\n    guid: guid,\n    locks : locks\n  }\n}\n\nconst initialState = {\n  name: 'rollDices',\n  rolledDices: [],\n  locks:[],\n  numberOfRolls: 0\n}\n\nexport default function rollDices(state = initialState, action) {\n  switch (action.type) {\n    case ROLL:\n      return {\n        ...state,\n        rolledDices: action.rolledDices,\n        numberOfRolls: (state.numberOfRolls+1)\n      }\n    case LOCK:\n      return {\n        ...state,\n        locks : action.locks\n      }\n    default :\n      return state\n  }\n}","const initialState = {\n  name: 'introduction'\n}\n\nexport default function introduction(state = initialState, action) {\n  switch (action.type) {\n    default :\n      return state\n  }\n}","const initialState = {\n  name: 'classSelection'\n}\n\nexport default function classSelection(state = initialState, action) {\n  switch (action.type) {\n    default :\n      return state\n  }\n}","const initialState = {\n  name: 'townLobby'\n}\n\nexport default function townLobby(state = initialState, action) {\n  switch (action.type) {\n    default :\n      return state\n  }\n}","import {filterFirst} from '../../utils'\n\nconst CLIENT_STATE_ENTER_PUSH = 'CLIENT_STATE_ENTER_PUSH'\nconst ASSIGN_DICE = 'ASSIGN_DICES:ASSIGN_DICE'\nconst RESET = 'ASSIGN_DICES:RESET'\n\n\nfunction slotsReducer(state = [], action) {\n  switch (action.type) {\n    case ASSIGN_DICE : {\n      const newArray = state.slice(0)\n      newArray[action.slotIndex] = action.dice\n      return newArray\n    }\n    default :\n      return state\n  }\n}\n\nfunction actionsReducer(state = [], action) {\n  switch (action.type) {\n    case ASSIGN_DICE : {\n      const newArray = state.slice(0)\n      newArray[action.actionIndex] = slotsReducer(state[action.actionIndex], action)\n      return newArray\n    }\n    default :\n      return state\n  }\n}\n\nexport function assignDice(guid, actionIndex, slotIndex, dice){\n  return {\n    type: ASSIGN_DICE,\n    guid : guid,\n    actionIndex : actionIndex,\n    slotIndex : slotIndex,\n    dice : dice\n  }\n}\n\nexport function reset(guid){\n  return {\n    type : RESET,\n    guid : guid\n  }\n}\n\nconst initialState = {\n  name: 'assignDices',\n  rolledDices: [],\n  currentDices: [],\n  actions: []\n}\nexport default function assignDices(state = initialState, action) {\n  switch (action.type) {\n    case CLIENT_STATE_ENTER_PUSH :\n      return {\n        ...state,\n        rolledDices: action.initialState.rolledDices,\n        currentDices : action.initialState.rolledDices\n      }\n    case ASSIGN_DICE :\n      return {\n        ...state,\n        actions: actionsReducer(state.actions, action),\n        currentDices : filterFirst(state.currentDices, action.dice)\n      }\n    case RESET : return {\n      ...state,\n      currentDices : state.rolledDices,\n      actions: []\n    }\n\n    default :\n      return state\n  }\n}","import {shallowEqual} from '../utils'\nimport * as clientActionReducers from './client-action-state'\n\nconst CLIENT_STATE_ENTER_PUSH = 'CLIENT_STATE_ENTER_PUSH'\nconst CLIENT_STATE_POP = 'CLIENT_STATE_POP'\nconst CLIENT_STATE_ENTER_REPLACE = 'CLIENT_STATE_ENTER_REPLACE'\n\nexport function pushState(guid, name, initialState){\n  return {\n    type: CLIENT_STATE_ENTER_PUSH ,\n    guid: guid,\n    name: name,\n    initialState : initialState\n  }\n}\n\nexport function popState(guid) {\n  return {\n    type: CLIENT_STATE_POP,\n    guid: guid\n  }\n}\n\nexport function setState(guid, name){\n  return {\n    type : CLIENT_STATE_ENTER_REPLACE,\n    guid : guid,\n    name : name\n  }\n}\n\nexport default function actionStateReducer(state = [], action) {\n  switch (action.type) {\n    case CLIENT_STATE_ENTER_PUSH :\n      console.log('pushing state '+action.name)\n      return state.concat(clientActionReducers[action.name](undefined, action))\n    case CLIENT_STATE_POP :\n      return state.slice(0,state.length-1)\n    case CLIENT_STATE_ENTER_REPLACE :\n      return state.slice(0,state.length-1).concat(clientActionReducers[action.name](undefined, {type:'@INIT@'}))\n    default :{\n      if(state.length === 0) return state\n      const topState = state[state.length - 1]\n      const topStateName = topState.name\n      const reducer = clientActionReducers[topStateName]\n      if(reducer){\n        const newTopState = reducer(topState, action)\n        if(shallowEqual(topState, newTopState)){\n          return state\n        } else {\n          return state.slice(0,state.length-1).concat(newTopState)\n        }\n      }\n      return state\n    }\n  }\n}","import {guid as guidGenerator} from '../utils'\nimport {changed} from '../utils'\nimport actionStateReducer from './action-state-reducer'\n\nexport function message(from, to, message) {\n  return {\n    type: 'MESSAGE',\n    id: guidGenerator(),\n    from: from,\n    guid: (to !== 'all' ? to : undefined),\n    to: to,\n    message: message\n  }\n}\n\nexport function setName(guid, name) {\n  return {\n    type: 'CLIENT_SET_NAME',\n    guid: guid,\n    name: name\n  }\n}\n\nexport function setClass(guid, className) {\n  return {\n    type: 'CLIENT_SET_CLASS',\n    guid: guid,\n    name: className\n  }\n}\n\nconst initialState = {\n  name: 'Noname',\n  className: 'Noone',\n  actionState: [],\n  actions: [\n    {\n      name: 'Shield',\n      slots: [{\n        require: 1\n      }]\n    },\n    {\n      name: 'Maneuver',\n      slots: [{\n        require: 3\n      }]\n    },\n    {\n      name: 'Throw',\n      slots: [{\n        require: 6\n      }]\n    },\n    {\n      name: 'Fireball',\n      slots: [\n        {\n          require: 5\n        },\n        {\n          require: 6\n        }\n      ]\n    }\n  ],\n  messages: [{\n    id: guidGenerator(),\n    from: 'Chat System',\n    to: 'all',\n    message: 'Welcome to chat'\n  }]\n}\n\nexport default function contextReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'MESSAGE' :\n      return {\n        ...state,\n        messages: state.messages.concat({\n          id: action.id,\n          from: action.from,\n          to: action.to,\n          message: action.message\n        })\n      }\n    case 'CLIENT_SET_NAME' :\n      return {\n        ...state,\n        name: action.name\n      }\n    case 'CLIENT_SET_CLASS' :\n      return {\n        ...state,\n        className: action.name\n      }\n    case 'LOAD_CLIENT_STATE' :\n      return action.state\n    default:\n      return changed(state, {\n        ...state,\n        actionState: actionStateReducer(state.actionState, action)\n      })\n  }\n}\n","import sharedContextReducer from './context-reducer'\nimport {combineReducers} from 'redux'\nimport {changed} from '../utils'\n\nconst initialState = {\n  connected : false,\n  shared : sharedContextReducer(undefined, {type:'@INIT@'})\n}\n\nfunction clientContextReducer(state = initialState, action){\n  switch (action.type){\n    case 'CONTEXT_SPAWNED': return {\n      shared : sharedContextReducer(state.shared, action),\n      connected: true\n    }\n    case 'CONTEXT_DESPAWNED': return {\n      shared: sharedContextReducer(state.shared, action),\n      connected: false\n    }\n    default : return changed(state, {\n      ...state,\n      shared : sharedContextReducer(state.shared, action)\n    })\n  }\n}\n\nfunction allContextsReducer(state = {}, action){\n  switch(action.type){\n    case 'CONTEXT_SPAWNED': return {...state, [action.guid]: clientContextReducer(state[action.guid], action)}\n    case 'CONTEXT_DESPAWNED': return {...state, [action.guid]: clientContextReducer(state[action.guid], action)}\n    default : return changed(state, Object.keys(state).reduce((newState, context) => {\n      if(action.guid){\n        if(!context) throw Error('Should not be null')\n        if(action.guid === context){\n          newState[context] = clientContextReducer(state[context], action)\n        } else {\n          newState[context] = state[context]\n        }\n      } else {\n        newState[context] = clientContextReducer(state[context], action)\n      }\n\n      return newState\n    }, {}))\n  }\n}\n\nexport default combineReducers({\n  contexts : allContextsReducer\n})\n","export default {\n  debug(...args){\n    console.debug(...args)\n  },\n  info(...args){\n    console.info(...args)\n  },\n  warn(...args){\n    console.warn(...args)\n  },\n  error(...args){\n    console.error(...args)\n  }\n}","import guid from '../utils/guid'\nimport log from './log'\n\nexport default function command({ getState, dispatch }) {\n  const socket = io()\n\n  let authToken = localStorage.getItem('auth-token')\n  if(!authToken){\n    authToken = guid()\n    localStorage.setItem('auth-token', authToken)\n  }\n\n  socket.on('connect', function onConnect(){\n    log.info('connected')\n    socket.emit('authentication', authToken)\n  })\n\n  socket.on('initial_state', function onInitialState(state){\n    log.info('initial_state', state)\n    dispatch({\n      type: 'LOAD_CLIENT_STATE',\n      state: state\n    })\n  })\n\n  socket.on('action', function onAction(action){\n    dispatch(action)\n  })\n\n  return (next) => (action) => {\n    const actionJSON = JSON.stringify(action)\n    log.info(`Action: ${actionJSON}`)\n    if(action.type === 'COMMAND_REQUEST'){\n      socket.emit('command_request', action)\n      return {}\n    } else {\n      return next(action)\n    }\n  }\n}\n","/*global __REDUX_DEVTOOLS_EXTENSION_COMPOSE__ */\n\nimport AppContainer from '../view/AppContainer'\nimport {contextReducer} from '../model'\nimport commandMiddleware from './client-io'\nimport {createStore, applyMiddleware, compose} from 'redux'\nimport {Provider} from 'react-redux'\nimport * as ReactDOM from 'react-dom'\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(contextReducer, composeEnhancers(applyMiddleware(commandMiddleware)))\n\nReactDOM.render(\n    <Provider store={store}>\n      <AppContainer></AppContainer>\n    </Provider>\n    ,document.getElementById('mount'))\n"],"names":["currentActionState","state","actionState","length","MessageLogContainer","React","refs","messages","scrollTop","scrollHeight","chatInput","focus","handleClick","props","onSend","value","handleKeyboard","e","key","React.createElement","className","css","messageLogContainer","messageLogContainerList","children","messageLogContainerInput","messageLogContainerSend","id","from","message","messageAuthorName","IntroductionComponent","defaultState","introductionState","chat","map","Message","mapStateToDispatch","dispatch","command","type","mapStateToProps","connect","ClassSelectionComponent","classSelectionState","TownLobbyComponent","townLobbyState","DicePoolComponent","dicePoolComponent","DiceComponent","imagePath","face","dice","lock","diceLocked","onClick","DiceSlotComponent","style","diceSlot","ActionPoolComponent","actionPoolComponent","actions","mapDispatchToProps","ActionComponent","name","actionComponent","RollDicesContainer","onReroll","onLock","dices","locks","rollDicesState","rerollButton","event","number","index","Dice","diceSpace","bind","undefined","actionpool","action","actionIndex","slots","slot","slotIndex","DiceSlot","require","rolledDices","currentDices","assignedActions","AssignActionsContainer","onReset","onAssign","onDone","assignDicesState","midButton","renderDice","AppContainer","clientState","StateContainer","clientStates","s4","Math","floor","random","toString","substring","guid","shallowEqual","oldState","newState","resultOldToNew","Object","keys","reduce","result","oldKey","resultNewToOld","newKey","changed","filterFirst","array","element","found","newArray","forEach","el","push","ROLL","LOCK","initialState","rollDices","numberOfRolls","introduction","classSelection","townLobby","CLIENT_STATE_ENTER_PUSH","ASSIGN_DICE","RESET","slotsReducer","slice","actionsReducer","assignDices","CLIENT_STATE_POP","CLIENT_STATE_ENTER_REPLACE","actionStateReducer","log","concat","clientActionReducers","topState","topStateName","reducer","newTopState","guidGenerator","contextReducer","to","sharedContextReducer","clientContextReducer","shared","allContextsReducer","context","Error","combineReducers","args","debug","info","warn","error","getState","socket","io","authToken","localStorage","getItem","setItem","on","onConnect","emit","onInitialState","onAction","next","actionJSON","JSON","stringify","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","commandMiddleware","ReactDOM","document","getElementById"],"mappings":"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"}